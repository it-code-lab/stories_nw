:root{
  --primary:#00E5FF;
  --accent:#FF3D7F;
  --bg:#0B0B0B;
  --ink:#e9eef5;
  --panel:#0f1217;
  --panel-border:#1b1f27;
  --font:Poppins,system-ui,Arial;
}

*{box-sizing:border-box}
html,body{height:100%}
body.builder{
  margin:0;background:#0d0f12;color:var(--ink);font-family:var(--font);
}

.left{
     background-color: cadetblue !important;
    font-size: small;
}
.center{
     background-color: darkorchid !important;
    font-size: small;
}
/* Background (for preview area only) */
/* .bg-layer{
  position:fixed; inset:0; width:100%; height:100%; object-fit:cover; z-index:-3; display:none;
}
#pvBgVideo.show,#pvBgImage.show{display:block}
.bg-tint{position:fixed; inset:0; background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.65)); z-index:-2} */


/* Preview-scoped background */
.preview { position: relative; overflow: hidden; }
.pv-bg { position: absolute; inset: 0; z-index: 0; }

#pvCard{
    width: 88%;
}
.pv-bg-layer {
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover; display: none;
}
.pv-bg-layer.show { display: block; }

.pv-bg-tint {
  position: absolute; inset: 0;
  background: var(--pv-bg-tint, rgba(0,0,0,.45));
}

/* Make preview content sit above the bg */
.preview .hud,
.preview .card { position: relative; z-index: 1; }

.preview .hud{
  padding:.55rem .8rem;
}

/* Appbar */
.appbar{
  position:sticky; top:0; z-index:8;
  display:flex;justify-content:space-between;align-items:center;gap:.8rem;
  padding:.8rem 1rem;background:rgba(15,18,23,.7); backdrop-filter:blur(8px);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.brand{font-weight:800;color:var(--primary)}
.row{display:flex;gap:.6rem;align-items:center}
.row2{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
.btn{
  padding:.55rem .9rem;border-radius:12px;border:1px solid #2a303b;background:#1b2130;color:#fff;font-weight:700;cursor:pointer
}
.btn:hover{filter:brightness(1.05)}
.btn.ghost{background:transparent}
.btn.small{padding:.45rem .7rem;font-size:.9rem}
.btn.tiny{padding:.25rem .55rem;font-size:.82rem}
.btn.accent{background:var(--accent);border-color:transparent;color:#000}
.btn.danger{border-color:#ff6b6b;color:#ff9a9a}

/* Layout */
.layout{display:grid;grid-template-columns:320px 1fr 520px;gap:1rem;padding:1rem}
.panel{background:#0f1217;border:1px solid #1b1f27;border-radius:14px;padding:1rem}
label{display:block;margin:.45rem 0;font-size:.92rem}
input,select,textarea{width:100%;margin-top:.25rem;padding:.55rem .6rem;border-radius:10px;border:1px solid #2a303b;background:#0c0f14;color:#fff}
textarea{resize:vertical}
.muted{opacity:.75}
.sep{border:none;border-top:1px solid #1b1f27;margin:.8rem 0}

/* Question list */
.qlist{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.5rem;max-height:40vh;overflow:auto}
.qitem{display:grid;grid-template-columns:42px 1fr auto;gap:.6rem;align-items:center;padding:.5rem;border:1px solid #232835;background:#11151e;border-radius:12px;cursor:pointer}
.qitem.active{outline:2px solid var(--primary)}
.qitem .idx{width:42px;height:42px;border-radius:10px;display:grid;place-items:center;background:#0b0e14;border:1px solid #222838}
.qitem .meta .title{font-weight:700}

/* Image grids */
.imggrid{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem}
.imggrid img{width:100%;height:90px;object-fit:cover;border-radius:8px;border:1px solid #2a303b}

/* MCQ options editor */
.optwrap{display:flex;flex-direction:column;gap:.6rem;margin:.4rem 0}
.optrow{border:1px solid #232835;background:#11151e;border-radius:12px;padding:.6rem}
.optrow .row2{grid-template-columns:1fr auto}
.opt-tools{display:flex;gap:.4rem;align-items:center;justify-content:flex-end}
.thumb{width:76px;height:56px;border-radius:8px;border:1px solid #2a303b;background:#0b0f14;object-fit:cover}

/* Preview (Player-like) */
.preview{
  position:relative; aspect-ratio:16/12; border-radius:14px;
  border:1px solid #1b1f27; overflow:hidden; background:rgba(10,12,16,.35);
}
.preview.portrait{aspect-ratio:9/16}

.preview .hud{
  display:flex; justify-content:space-between; align-items:center;
  padding:.6rem .8rem; background:rgba(15,18,23,.5); backdrop-filter:blur(6px);
  border-bottom:1px solid rgba(255,255,255,.06);
}
/* Header title shows the question now â€” allow two lines & clamp */
.preview .title{
  font-weight:800;
  font-size:clamp(14px, 2.2vh, 22px);
  line-height:1.25;
  display:-webkit-box;
  /* -webkit-line-clamp:2; */
  -webkit-box-orient:vertical;
  overflow:hidden;
}
.preview .pill{background:var(--accent); color:#000; padding:.2rem .6rem; border-radius:999px; font-weight:800}
.preview .counter{opacity:.85}

.card{
  position:absolute; inset:10% 6% 8% 6%;  
  display:flex; flex-direction:column; gap:.6rem;
  background:rgba(10,12,16,.45); border:1px solid rgba(255,255,255,.08);
  border-radius:18px; padding:1rem; backdrop-filter:blur(6px);
  transition:opacity .3s ease, transform .3s ease;
}

/* .preview.portrait .card{
  inset:14% 6% 10% 6%;
} */

.card.fade-out{opacity:0;transform:scale(.98)}
.card.fade-in{opacity:1;transform:scale(1)}
/* .question{font-weight:800;font-size:1.2rem} */
/* We no longer show the question in the card body by default */
.question{ display:none; }

.images{display:flex; gap:.5rem; flex-wrap:wrap}

.images img{  object-fit:var(--qimg-fit, cover); object-position:var(--qimg-pos, center); max-height:24vh; border-radius:10px; border:1px solid rgba(255,255,255,.1) ;margin: auto; will-change: transform, opacity;}


.options{display:grid; gap:.6rem; margin-top:auto}

.options.cols-1{grid-template-columns:1fr}
.options.cols-2{grid-template-columns:1fr 1fr}
.options.cols-3{
  grid-template-columns:repeat(3, minmax(0, 1fr));
}
.options.cols-4{
  grid-template-columns:1fr 1fr;   /* 2x2 is most readable */
}
/* Option boxes: height scales with viewport; text clamps nicely */
.opt{
  min-height:clamp(48px, 7.2vh, 112px);
  padding:clamp(.5rem, 1.4vh, .9rem);
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.06);
  color:#fff; font-weight:800;
  will-change:transform,opacity;
}
.opt-text{
  margin-top:.35rem;
  text-align:center;
  font-size:clamp(14px, 2.2vh, 22px);
  line-height:1.25;
  display:-webkit-box;
  /* -webkit-line-clamp:2; */
  -webkit-box-orient:vertical;
  overflow:hidden;
}

.preview.portrait .options{
  display: contents;
}

.preview.portrait .opt{
  min-height:clamp(56px, 9vh, 128px);
}

.opt-img{width:100%; border-radius:10px; overflow:hidden}
.opt-img img{object-fit:var(--oimg-fit, cover); object-position:var(--oimg-pos, center); width:100%; height:100%; object-fit:cover}

.explanation{
  margin-top:.4rem; padding:.6rem .8rem; border-radius:12px;
  background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
}

@keyframes popIn{from{opacity:0;transform:scale(.97)}to{opacity:1;transform:scale(1)}}

/* Responsive */
@media (max-width:1200px){
  .layout{grid-template-columns:1fr; }
  .right{order:3}
}

/* --- Generic animations --- */
/* --- Generic animations --- */
@keyframes fadeIn { from { opacity:0 } to { opacity:1 } }
@keyframes slideUp { from { transform:translateY(18px); opacity:0 } to { transform:translateY(0); opacity:1 } }
@keyframes zoomIn { from { transform:scale(.96); opacity:0 } to { transform:scale(1); opacity:1 } }

.anim-fade  { animation: fadeIn 0.55s ease both; }
.anim-slide { animation: slideUp 0.55s cubic-bezier(.2,.7,.2,1) both; }
.anim-zoom  { animation: zoomIn 0.55s cubic-bezier(.2,.7,.2,1) both; }

/* Respect user prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .anim-fade, .anim-slide, .anim-zoom { animation: none !important; }
}

/* --- Idle Motion Effects --- */
@keyframes breath {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}
@keyframes shake {
  0%, 100% { transform: translate(0, 0); }
  25% { transform: translate(-1px, 1px); }
  50% { transform: translate(1px, -1px); }
  75% { transform: translate(-1px, -1px); }
}
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.idle-breath  { animation: breath 6s ease-in-out infinite; }
.idle-shake   { animation: shake 4s ease-in-out infinite; }
.idle-float   { animation: float 5s ease-in-out infinite; }

/* Dynamic intensity modifier (JS adds inline style for intensity) */

.font-preview{
  padding:.5rem .75rem; border-radius:10px;
  background:rgba(255,255,255,.06); color:#fff; font-weight:700;
  min-width:120px; text-align:center;
}

.preview{ --q-scale:1; --opt-scale:1; }
.preview .title{ transform: scale(var(--q-scale)); transform-origin:left top; }
.opt-text{ transform: scale(var(--opt-scale)); transform-origin:center; }

.timer-ring{
  width:32px; height:32px; border-radius:50%;
  background:
    radial-gradient(closest-side, rgba(0,0,0,.4) 80%, transparent 81% 100%),
    conic-gradient(var(--timer-color,#00E5FF) var(--timer-deg, 0deg), rgba(255,255,255,.12) 0);
}
.timer-anim { animation: timerSpin var(--timer-dur, 12s) linear forwards; }
@keyframes timerSpin { from{ --timer-deg:360deg; } to{ --timer-deg:0deg; } }

/* 3 options: two on the first row, one centered on second row */
/* .options.cols-3{
  grid-template-columns:1fr 1fr;
  grid-template-areas:
    "a b"
    "c c";
}
.options.cols-3 .opt:nth-child(1){ grid-area:a; }
.options.cols-3 .opt:nth-child(2){ grid-area:b; }
.options.cols-3 .opt:nth-child(3){ grid-area:c; } */

.themeContainer{
    margin-top: 1rem;
    border: 1px solid #1b1f27;
    border-radius: 14px;
    padding: 1rem;
    background-color: blueviolet; 
    backdrop-filter: blur(8px);
    max-height: 200px;
    overflow-y: auto;
}

/* Focus affordance */
.optrow:focus, #qImgGrid:focus {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

/* Tiny hint under Question Images grid */
.paste-hint{
  margin-top:.35rem;
  font-size:.85rem;
  opacity:.7;
}
